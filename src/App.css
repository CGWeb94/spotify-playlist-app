:root{
  --spotify-green: #1ed760;
  --bg-top: #0f0f11;
  --bg-bottom: #121212;
  --panel-bg: #161616;
  --text-main: #ffffff;
  --text-sub: #b3b3b3;
  --muted: #9a9a9a;
}

/* App background */
body {
  background: linear-gradient(180deg, var(--bg-top) 0%, var(--bg-bottom) 100%);
  color: var(--text-main);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  height: 100vh;
}
#root { padding: 20px; }

/* Sidebar */
.app-layout { padding-top: 18px; }
.app-sidebar {
  width: 260px;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  border-radius: 8px;
  padding: 14px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.6);
  height: calc(100vh - 40px);
  position: sticky;
  top: 20px;
}
.sidebar-header h3 { color: var(--text-main); font-weight:700; }
.sidebar-nav { display:flex; flex-direction:column; gap:8px; margin-top:12px; }
.nav-item {
  display:flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-radius:8px;
  background: transparent;
  border: none;
  text-align: left;
  cursor: pointer;
  color: var(--text-sub);
}
.nav-item .badge { margin-left: auto; background: rgba(255,255,255,0.06); color: var(--text-main); }
.nav-item.active, .nav-item:hover {
  background: linear-gradient(90deg, rgba(30,215,96,0.12), rgba(30,215,96,0.04));
  color: var(--text-main);
  box-shadow: 0 6px 18px rgba(30,215,96,0.06);
}

/* Content area */
.content-area { padding-left: 20px; padding-right: 20px; min-height: 400px; }

/* Legend */
.legend {
  background: rgba(255,255,255,0.03);
  color: var(--text-main);
  display:flex;
  gap:12px;
  align-items:center;
  padding: 8px 12px;
  border-radius: 8px;
}
.legend i { color: var(--spotify-green); }

/* Playlist tiles */
.playlist-grid { display: flex; flex-wrap: wrap; gap: 12px; margin-top:12px; }
.playlist-tile {
  width: 240px;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 6px 18px rgba(0,0,0,0.6);
  cursor: pointer;
  transition: transform .18s ease, box-shadow .18s ease;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
}
.playlist-tile:hover { transform: translateY(-6px); box-shadow: 0 24px 48px rgba(0,0,0,0.7); }
.playlist-image { width: 100%; height: 150px; object-fit: cover; display:block; }
.playlist-info { padding: 10px; text-align: left; color: var(--text-main); }
.truncate { display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Genre / Year tile */
.genre-tile {
  width: 260px;
  height: 160px;
  border-radius: 10px;
  background-size: cover;
  background-position: center;
  position: relative;
  box-shadow: 0 6px 18px rgba(0,0,0,0.6);
  cursor: pointer;
  transition: transform .18s ease, box-shadow .18s ease;
  overflow: hidden;
}
.genre-tile:hover { transform: translateY(-6px); box-shadow: 0 28px 56px rgba(0,0,0,0.75); }
.genre-tile-overlay {
  position: absolute;
  inset: 0;
  display:flex;
  flex-direction:column;
  justify-content:flex-end;
  padding: 12px;
  background: linear-gradient(transparent, rgba(0,0,0,0.6));
  color: var(--text-main);
}
.genre-title { font-size: 20px; font-weight: 700; }
.genre-sub { font-size: 13px; color: var(--text-sub); }

/* GenreTracks list */
.genre-tracks { text-align: left; padding: 12px; border-radius: 8px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border: 1px solid rgba(255,255,255,0.03); }
.controls { display:flex; gap:8px; align-items:center; margin-bottom: 8px; }
.controls input[type="text"], .controls input {
  padding:6px 8px;
  border:1px solid rgba(255,255,255,0.04);
  border-radius:6px;
  background: rgba(0,0,0,0.3);
  color: var(--text-main);
}
.btn { padding:6px 10px; border-radius:6px; border:1px solid rgba(255,255,255,0.04); background: rgba(255,255,255,0.02); color: var(--text-main); cursor:pointer; }
.btn-sm { padding:4px 8px; border-radius:6px; border:1px solid rgba(255,255,255,0.04); background: rgba(255,255,255,0.01); color: var(--text-main); cursor:pointer; }

.track-row { display:flex; align-items:center; padding:8px 6px; border-bottom:1px solid rgba(255,255,255,0.03); }
.track-thumb { width:48px; height:48px; object-fit:cover; border-radius:4px; margin-right:10px; }
.track-meta { min-width: 220px; }
.track-title { font-weight:600; color: var(--text-main); }
.track-sub { font-size: 13px; color: var(--text-sub); }

/* Pagination */
.pagination { display:flex; gap:8px; align-items:center; margin-top:12px; color: var(--text-sub); }

/* Loading overlay */
.loading-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.6);
  z-index: 9999;
}
.loading-box {
  background: linear-gradient(180deg, #121212, #181818);
  padding: 18px 22px;
  border-radius: 10px;
  box-shadow: 0 12px 40px rgba(2,6,23,0.6);
  display: flex;
  flex-direction: column;
  align-items: center;
  color: var(--text-main);
}

/* progress bar customization */
.progress-bar.bg-success { background-color: var(--spotify-green) !important; }
.spinner-border.text-success { color: var(--spotify-green) !important; }

/* floating create button (bottom center) */
.floating-create {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: 18px;
  z-index: 999;
}
.create-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 18px;
  border-radius: 28px;
  background: linear-gradient(90deg, rgba(30,215,96,0.14), rgba(30,215,96,0.06));
  border: 1px solid rgba(30,215,96,0.18);
  color: var(--text-main);
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 10px 30px rgba(30,215,96,0.06);
}
.create-btn:disabled { opacity: 0.45; cursor: not-allowed; }

/* modal */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
}
.modal-box {
  width: 420px;
  background: linear-gradient(180deg, #121212, #181818);
  padding: 18px;
  border-radius: 10px;
  color: var(--text-main);
  box-shadow: 0 12px 40px rgba(0,0,0,0.7);
}
.modal-box h4 { margin: 0 0 8px 0; }
.modal-box label { display: block; margin-top: 8px; color: var(--text-sub); }
.modal-box input { width: 100%; padding: 8px; margin-top: 6px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.04); background: rgba(0,0,0,0.25); color: var(--text-main); }

/* back to top button: circular progress ring using ::before and ::after */
.back-top {
  position: fixed;
  right: 18px;
  bottom: 18px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  box-shadow: 0 8px 20px rgba(0,0,0,0.6);
  z-index: 9999;
  cursor: pointer;
  border: none;
  padding: 0;
  outline: none;
}

/* animated conic gradient ring (use --pct set from JS inline style, e.g. "45%") */
.back-top::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: conic-gradient(var(--spotify-green) var(--pct, 0%), rgba(255,255,255,0.06) 0%);
  /* slight blur for nicer look */
  filter: drop-shadow(0 4px 10px rgba(30,215,96,0.08));
  z-index: 1;
}

/* inner cover to make it a ring (thickness = 8px) */
.back-top::after {
  content: "";
  position: absolute;
  left: 8px;
  top: 8px;
  right: 8px;
  bottom: 8px;
  border-radius: 50%;
  background: radial-gradient(circle at center, rgba(0,0,0,0.6), rgba(0,0,0,0.6));
  z-index: 2;
}

/* icon sits above the ring */
.back-top > i {
  position: relative;
  z-index: 3;
  color: var(--spotify-green);
  font-size: 16px;
}

/* optional hover effect */
.back-top:hover::before {
  filter: drop-shadow(0 6px 16px rgba(30,215,96,0.12));
}

/* ensure mobile tap area */
@media (max-width: 480px) {
  .back-top { width: 48px; height: 48px; right: 12px; bottom: 12px; }
  .back-top::after { left: 6px; top: 6px; right: 6px; bottom: 6px; }
}

/* OptimizedImage styles - updated for icon placeholder */
.opt-img-wrap {
  position: relative;
  overflow: hidden;
  display: block;
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
}

/* image: start invisible, then fade in */
.opt-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  opacity: 0;
  transform: scale(1.02);
  transition: opacity .35s ease, transform .45s ease, filter .45s ease;
  filter: none;
}
.opt-img.opt-img-loaded {
  opacity: 1;
  transform: scale(1);
  filter: none;
}

/* placeholder overlay with FA icon (white on black, slight blur) */
.opt-placeholder {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.9);
  backdrop-filter: blur(4px) saturate(0.9);
  z-index: 2;
}
.opt-placeholder i {
  color: #fff;
  font-size: 20px;
  opacity: 0.95;
}

/* ensure small thumbnails keep aspect */
.track-thumb, .opt-img-wrap { border-radius: 6px; }

/* placeholder chip style already exists, ensure good contrast */
.source-chip { display:inline-block; margin-right:6px; padding:4px 8px; border-radius:999px; background: rgba(255,255,255,0.03); color: var(--text-sub); font-size:12px; }

/* Make pl-list anchors visible in dark theme */
#root .playlist-grid + div > div {
  border-color: rgba(255,255,255,0.03);
  color: var(--text-sub);
}
